import{r as l,a4 as N,j as g,z as C,a5 as W}from"./index-B5IrYwSf.js";import{m as D}from"./CloseButton-Cfj2d_0a.js";function _(...e){return e.filter(t=>t!==null&&typeof t<"u").reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===void 0?n:function(...s){t.apply(this,s),n.apply(this,s)}},void 0)}const z=({offsetX:e,offsetY:t,placement:n,transitionType:r})=>r==="fade"?O(e,t)[n]:F(e,t)[n],u={initial:{opacity:0,transform:"scale(0.75)"},animate:{transform:"scale(1)",opacity:1},exit:{opacity:0,transform:"scale(0.75)"}},p={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},F=(e,t)=>({"top-end":{default:{top:t,right:e},variants:{...u}},"top-start":{default:{top:t,left:e},variants:{...u}},"top-center":{default:{top:t,left:"50%",transform:"translateX(-50%)"},variants:{...u}},"bottom-end":{default:{bottom:t,right:e},variants:{...u}},"bottom-start":{default:{bottom:t,left:e},variants:{...u}},"bottom-center":{default:{bottom:t,left:"50%",transform:"translateX(-50%)"},variants:{...u}}}),O=(e,t)=>({"top-end":{default:{top:t,right:e},variants:{...p}},"top-start":{default:{top:t,left:e},variants:{...p}},"top-center":{default:{top:t,left:"50%",transform:"translateX(-50%)"},variants:{...p}},"bottom-end":{default:{bottom:t,right:e},variants:{...p}},"bottom-start":{default:{bottom:t,left:e},variants:{...p}},"bottom-center":{default:{bottom:t,left:"50%",transform:"translateX(-50%)"},variants:{...p}}}),S=e=>{const[t,n]=l.useState([]),r=l.useCallback(a=>(typeof a>"u"&&t.length&&(a=t[t.length-1].key),a),[t]),s=l.useCallback(a=>{const o=e||"_"+Math.random().toString(36).substr(2,12);return n([...t,{key:o,visible:!0,node:a}]),o},[t,e]),c=l.useCallback(()=>{n(t.map(a=>({...a,visible:!1}))),setTimeout(()=>{n([])},50)},[t]),m=l.useCallback(a=>{n(t.map(o=>(o.key===r(a)&&(o.visible=!1),o))),setTimeout(()=>{n(t.filter(o=>o.visible))},50)},[t,r]);return{messages:t,push:s,removeAll:c,remove:m}},E=e=>{const t=l.useRef(null),{transitionType:n="scale",placement:r=N.TOP_END,offsetX:s=30,offsetY:c=30,messageKey:m,block:a=!1,ref:o,callback:d,...f}=e,{push:b,removeAll:A,remove:T,messages:j}=S(m);l.useImperativeHandle(o,()=>({root:t.current,push:b,removeAll:A,remove:T}));const h=z({offsetX:s,offsetY:c,placement:r,transitionType:n}),I={triggerByToast:!0,...f},R=j.map(i=>{var w,k,x,P;return g.jsx(D.div,{className:"toast-wrapper",initial:h.variants.initial,variants:h.variants,animate:i.visible?"animate":"exit",transition:{duration:.15,type:"tween"},children:l.cloneElement(i.node,{...I,ref:o,onClose:_((k=(w=i.node)==null?void 0:w.props)==null?void 0:k.onClose,()=>T(i.key)),className:C((P=(x=i.node)==null?void 0:x.props)==null?void 0:P.className)})},i.key)});return g.jsx("div",{style:h.default,...f,ref:i=>{t.current=i,d==null||d(i)},className:C("toast",a&&"w-full"),children:R})};E.getInstance=e=>{const{wrapper:t,...n}=e,r=l.createRef(),s=(typeof t=="function"?t():t)||document.body;return new Promise(c=>{const m=()=>{c([r,o])};function a(d){const f=document.createElement("div");s.appendChild(f);const b=W.createRoot(f);return b.render(d),b}const{unmount:o}=a(g.jsx(E,{...n,ref:r,callback:m}))})};const B={placement:N.TOP_END,offsetX:30,offsetY:30,transitionType:"scale",block:!1},M="default",v=new Map;function H(e){if(/\top\b/.test(e))return"top-full";if(/\bottom\b/.test(e))return"bottom-full"}async function K(e,t){const[n]=await E.getInstance(t);return v.set(e||M,n),n}function L(e){return v.size===0?null:v.get(e||M)}const y=e=>y.push(e);y.push=(e,t=B)=>{let n=t.placement;t.block&&(n=H(t.placement));const r=L(n);return r!=null&&r.current?r.current.push(e):K(n??"",t).then(s=>{var c;return(c=s.current)==null?void 0:c.push(e)})};y.remove=e=>{v.forEach(t=>{t.current.remove(e)})};y.removeAll=()=>{v.forEach(e=>e.current.removeAll())};export{y as t};
