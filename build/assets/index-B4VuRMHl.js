import{X as M,R as F,j as e,r as j,f as U,V as W}from"./index-B5IrYwSf.js";import{u as Q,C as X,a as _,D as H,A as J}from"./useDebounce-CtS5788L.js";import{B as b,I as Y,u as Z,F as ee,a as P,C as S}from"./index.esm-CCO8k5GL.js";import{e as te,l as se,g as ae,h as re,m as ne,A as oe,b as T,c as le,k as ce,i as ie}from"./index-DzIjJXQ9.js";import{a as de,F as ue}from"./index-Diu7EEv5.js";import{D as me}from"./Drawer-cn7TLeWU.js";import{C as w}from"./index-CIt6kdqh.js";import{B as L}from"./Badge-DStSZEmW.js";import{S as xe,c as he,O as pe}from"./Select-BaPAiwbL.js";import{N as k,a as ge}from"./NumericInput-B-TYsbtv.js";import{t as fe,z as h}from"./index-CzVxQRl_.js";import{c as D}from"./Dialog-uXgwdOg_.js";import{C as I}from"./ConfirmDialog-SACwPh4o.js";import{S as je}from"./StickyFooter-Du0ECql9.js";import"./Card-BwF7YU63.js";import"./useControllableState-DqCAkSU0.js";import"./CloseButton-Cfj2d_0a.js";import"./Pagination-N3uZXzPk.js";import"./index-DPUiuvHR.js";import"./debounce-B0zjTqoc.js";import"./toString-DGAcNTrc.js";import"./useMergeRef-CbC_Qfe6.js";import"./floating-ui.dom-4meoaf82.js";const be={pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},Ce={minAmount:0,maxAmount:5e3,productStatus:"published",productType:["Bags","Cloths","Devices","Shoes","Watches"]},ve={tableData:be,filterData:Ce,selectedProduct:[]},Se=M(a=>({...ve,setFilterData:s=>a(()=>({filterData:s})),setTableData:s=>a(()=>({tableData:s})),setSelectedProduct:(s,n)=>a(d=>{const c=d.selectedProduct;return s?{selectedProduct:[...c,n]}:c.some(i=>n.id===i.id)?{selectedProduct:c.filter(i=>i.id!==n.id)}:{selectedProduct:c}}),setSelectAllProduct:s=>a(()=>({selectedProduct:s}))})),C=()=>{const{tableData:a,filterData:s,setTableData:n,setFilterData:d,selectedProduct:c,setSelectedProduct:i,setSelectAllProduct:m}=Se(v=>v),{data:u,error:o,isLoading:l,mutate:x}=Q(["/api/products",{...a,...s}],([v,f])=>de(f),{revalidateOnFocus:!1}),p=(u==null?void 0:u.list)||[],g=(u==null?void 0:u.total)||0;return{error:o,isLoading:l,tableData:a,filterData:s,mutate:x,productList:p,productListTotal:g,setTableData:n,selectedProduct:c,setSelectedProduct:i,setSelectAllProduct:m,setFilterData:d}},De=()=>{const a=F(),{productList:s}=C();return e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(X,{filename:"product-list.csv",data:s,children:e.jsx(b,{icon:e.jsx(te,{className:"text-xl"}),children:"Export"})}),e.jsx(b,{variant:"solid",icon:e.jsx(se,{className:"text-xl"}),onClick:()=>a("/create-product"),children:"Add products"})]})},ye=a=>{const{onInputChange:s}=a;function n(i){s==null||s(i)}const d=_(n,500),c=i=>{d(i.target.value)};return e.jsx(Y,{placeholder:"Search",suffix:e.jsx(ae,{className:"text-lg"}),onChange:c})},{Control:Ne}=he,A=[{value:"published",label:"Published",className:"bg-emerald-500"},{value:"inactive",label:"Inactive",className:"bg-red-500"},{value:"scheduled",label:"Scheduled",className:"bg-amber-500"},{value:"draft",label:"Draft",className:"bg-gray-400"}],Pe=["Soya","Araya","Devan 1","Nenaposha","Pasta"],Te=a=>e.jsx(pe,{...a,customLabel:(s,n)=>e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(L,{className:s.className}),e.jsx("span",{className:"ml-2 rtl:mr-2",children:n})]})}),we=({children:a,...s})=>{const n=s.getValue()[0];return e.jsxs(Ne,{...s,children:[n&&e.jsx(L,{className:U("ml-4",n.className)}),a]})},ke=h.object({minAmount:h.union([h.string(),h.number()]),maxAmount:h.union([h.string(),h.number()]),productStatus:h.string(),productType:h.array(h.string())}),Ae=()=>{const[a,s]=j.useState(!1),{filterData:n,setFilterData:d}=C(),{handleSubmit:c,control:i,getValues:m}=Z({defaultValues:n,resolver:fe(ke)}),u=o=>{d(o),s(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{icon:e.jsx(re,{}),onClick:()=>s(!0),children:"Filter"}),e.jsx(me,{title:"Filter",isOpen:a,onClose:()=>s(!1),onRequestClose:()=>s(!1),children:e.jsxs(ee,{className:"h-full",containerClassName:"flex flex-col justify-between h-full",onSubmit:c(u),children:[e.jsxs("div",{children:[e.jsx(P,{label:"Product price",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{name:"minAmount",control:i,render:({field:o})=>e.jsx(k,{thousandSeparator:!0,type:"text",inputPrefix:"$",autoComplete:"off",placeholder:"0.00",value:o.value,max:m("maxAmount"),isAllowed:l=>{const{floatValue:x}=l;return(x||0)<=m("maxAmount")},onChange:l=>o.onChange(l.target.value)})}),e.jsx("span",{children:e.jsx(ne,{})}),e.jsx(S,{name:"maxAmount",control:i,render:({field:o})=>e.jsx(k,{thousandSeparator:!0,type:"text",inputPrefix:"$",autoComplete:"off",placeholder:"0.00",value:o.value,onChange:o.onChange})})]})}),e.jsx(P,{label:"Product status",children:e.jsx(S,{name:"productStatus",control:i,render:({field:o})=>e.jsx(xe,{options:A,...o,value:A.filter(l=>l.value===o.value),components:{Option:Te,Control:we},onChange:l=>o.onChange(l==null?void 0:l.value)})})}),e.jsx(P,{label:"Product type",children:e.jsx("div",{className:"mt-4",children:e.jsx(S,{name:"productType",control:i,render:({field:o})=>e.jsx(w.Group,{vertical:!0,className:"flex",...o,children:Pe.map((l,x)=>e.jsx(w,{name:o.name,value:l,className:"justify-between flex-row-reverse heading-text",children:l},l+x))})})})})]}),e.jsx(b,{variant:"solid",type:"submit",children:"Query"})]})})]})},Fe=()=>{const{tableData:a,setTableData:s}=C(),n=d=>{const c=D(a);c.query=d,c.pageIndex=1,typeof d=="string"&&d.length>1&&s(c),typeof d=="string"&&d.length===0&&s(c)};return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx(ye,{onInputChange:n}),e.jsx(Ae,{})]})},Le=({row:a})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{shape:"round",size:60,...a.img?{src:a.img}:{icon:e.jsx(ue,{})}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold heading-text mb-1",children:a.name}),e.jsxs("span",{children:["ID: ",a.productCode]})]})]}),Ie=({onEdit:a,onDelete:s})=>e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(T,{title:"Edit",children:e.jsx("div",{className:"text-xl cursor-pointer select-none font-semibold",role:"button",onClick:a,children:e.jsx(le,{})})}),e.jsx(T,{title:"Delete",children:e.jsx("div",{className:"text-xl cursor-pointer select-none font-semibold",role:"button",onClick:s,children:e.jsx(ce,{})})})]}),Oe=()=>{const a=F(),[s,n]=j.useState(!1),[d,c]=j.useState(""),i=()=>{n(!1)},m=t=>{n(!0),c(t.id)},u=t=>{a(`/SalesDetails/products/product-edit/${t.id}`)},o=()=>{const t=l.filter(r=>d!==r.id);f([]),R({list:t,total:x-y.length},!1),n(!1),c("")},{productList:l,productListTotal:x,tableData:p,isLoading:g,setTableData:v,setSelectAllProduct:f,setSelectedProduct:O,selectedProduct:y,mutate:R}=C(),V=j.useMemo(()=>[{header:"Product",accessorKey:"name",cell:t=>{const r=t.row.original;return e.jsx(Le,{row:r})}},{header:"Category",accessorKey:"stock",cell:t=>{const r=t.row.original;return e.jsx("span",{className:"font-bold heading-text",children:r.stock})}},{header:"Sub Category",accessorKey:"stock",cell:t=>{const r=t.row.original;return e.jsx("span",{className:"font-bold heading-text",children:r.stock})}},{header:"Price",accessorKey:"price",cell:t=>{const{price:r}=t.row.original;return e.jsx("span",{className:"font-bold heading-text",children:e.jsx(ge,{fixedDecimalScale:!0,prefix:"$",displayType:"text",value:r,decimalScale:2,thousandSeparator:!0})})}},{header:"Uom",accessorKey:"stock",cell:t=>{const r=t.row.original;return e.jsx("span",{className:"font-bold heading-text",children:r.stock})}},{header:"Volume",accessorKey:"stock",cell:t=>{const r=t.row.original;return e.jsx("span",{className:"font-bold heading-text",children:r.stock})}},{header:"Unite Value",accessorKey:"stock",cell:t=>{const r=t.row.original;return e.jsx("span",{className:"font-bold heading-text",children:r.stock})}},{header:"",id:"action",cell:t=>e.jsx(Ie,{onEdit:()=>u(t.row.original),onDelete:()=>m(t.row.original)})}],[]),N=t=>{v(t),y.length>0&&f([])},z=t=>{const r=D(p);r.pageIndex=t,N(r)},B=t=>{const r=D(p);r.pageSize=Number(t),r.pageIndex=1,N(r)},K=t=>{const r=D(p);r.sort=t,N(r)},E=(t,r)=>{O(t,r)},q=(t,r)=>{if(t){const $=r.map(G=>G.original);f($)}else f([])};return e.jsxs(e.Fragment,{children:[e.jsx(H,{selectable:!0,columns:V,data:l,noData:!g&&l.length===0,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:g,pagingData:{total:x,pageIndex:p.pageIndex,pageSize:p.pageSize},checkboxChecked:t=>y.some(r=>r.id===t.id),onPaginationChange:z,onSelectChange:B,onSort:K,onCheckBoxChange:E,onIndeterminateCheckBoxChange:q}),e.jsx(I,{isOpen:s,type:"danger",title:"Remove products",onClose:i,onRequestClose:i,onCancel:i,onConfirm:o,children:e.jsxs("p",{children:[" ","Are you sure you want to remove this product? This action can't be undo."," "]})})]})},Re=()=>{const{selectedProduct:a,productList:s,mutate:n,productListTotal:d,setSelectAllProduct:c}=C(),[i,m]=j.useState(!1),u=()=>{m(!0)},o=()=>{m(!1)},l=()=>{const x=s.filter(p=>!a.some(g=>g.id===p.id));c([]),n({list:x,total:d-a.length},!1),m(!1)};return e.jsxs(e.Fragment,{children:[a.length>0&&e.jsx(je,{className:"flex items-center justify-between py-4 bg-white dark:bg-gray-800",stickyClass:"-mx-4 sm:-mx-8 border-t border-gray-200 dark:border-gray-700 px-8",defaultClass:"container mx-auto px-8 rounded-xl border border-gray-200 dark:border-gray-600 mt-4",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.length>0&&e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg text-primary",children:e.jsx(ie,{})}),e.jsxs("span",{className:"font-semibold flex items-center gap-1",children:[e.jsxs("span",{className:"heading-text",children:[a.length," ","Products"]}),e.jsx("span",{children:"selected"})]})]})}),e.jsx("div",{className:"flex items-center",children:e.jsx(b,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error",onClick:u,children:"Delete"})})]})})}),e.jsx(I,{isOpen:i,type:"danger",title:"Remove products",onClose:o,onRequestClose:o,onCancel:o,onConfirm:l,children:e.jsxs("p",{children:[" ","Are you sure you want to remove these products? This action can't be undo."," "]})})]})},nt=()=>e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("h3",{children:"Products"}),e.jsx(De,{})]}),e.jsx(Fe,{}),e.jsx(Oe,{})]})})}),e.jsx(Re,{})]});export{nt as default};
