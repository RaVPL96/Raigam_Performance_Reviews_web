import{j as e,r as p,i as z,V as L,R as A}from"./index-B5IrYwSf.js";import{a as g,C as x,I as j,u as F,F as R,B as y}from"./index.esm-CCO8k5GL.js";import{N}from"./Notification-nsktbxlj.js";import{t as P}from"./toast-Bf3WYsML.js";import{B as E}from"./BottomStickyBar-hc4hDOX7.js";import{C as f}from"./Card-BwF7YU63.js";import{R as T}from"./RichTextEditor-CdKe52n2.js";import{U as w,s as G}from"./sleep-D5Rthu5Z.js";import{D as H,c as K}from"./Dialog-uXgwdOg_.js";import{C as q}from"./ConfirmDialog-SACwPh4o.js";import{i as W,j as $}from"./CloseButton-Cfj2d_0a.js";import{o as B}from"./index-R_st83Tk.js";import{S as v}from"./Select-BaPAiwbL.js";import{t as J,z as c}from"./index-CzVxQRl_.js";import{k as Q}from"./index-DzIjJXQ9.js";import"./StatusIcon-BYLHsQ-F.js";import"./floating-ui.dom-4meoaf82.js";import"./FileItem-CyU1Hyvm.js";import"./useUniqueId-B4COUAd7.js";import"./uniqueId-CiKHi5Kj.js";import"./toString-DGAcNTrc.js";import"./useMergeRef-CbC_Qfe6.js";const X=({control:n,errors:r})=>{var t,i,l,o;return e.jsxs(f,{children:[e.jsx("h4",{className:"mb-6",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx(g,{label:"Product name",invalid:!!r.name,errorMessage:(t=r.name)==null?void 0:t.message,children:e.jsx(x,{name:"name",control:n,render:({field:s})=>e.jsx(j,{type:"text",autoComplete:"off",placeholder:"Product Name",...s})})}),e.jsx(g,{label:"Product code",invalid:!!r.productCode,errorMessage:(i=r.productCode)==null?void 0:i.message,children:e.jsx(x,{name:"productCode",control:n,render:({field:s})=>e.jsx(j,{type:"text",autoComplete:"off",placeholder:"Product Code",...s})})}),e.jsx(g,{label:"SPA code",invalid:!!r.SPAcode,errorMessage:(l=r.SPAcode)==null?void 0:l.message,children:e.jsx(x,{name:"SPAcode",control:n,render:({field:s})=>e.jsx(j,{type:"text",autoComplete:"off",placeholder:"Product Code",...s})})})]}),e.jsx(g,{label:"Description",invalid:!!r.description,errorMessage:(o=r.description)==null?void 0:o.message,children:e.jsx(x,{name:"description",control:n,render:({field:s})=>e.jsx(T,{content:s.value,invalid:!!r.description,onChange:({html:a})=>{s.onChange(a)}})})})]})},Y=({control:n,errors:r})=>{var t,i;return e.jsxs(f,{children:[e.jsx("h4",{className:"mb-6",children:"Pricing"}),e.jsxs("div",{children:[e.jsx(g,{label:"Price",invalid:!!r.price,errorMessage:(t=r.price)==null?void 0:t.message,children:e.jsx(x,{name:"price",control:n,render:({field:l})=>e.jsx(j,{type:"number",inputMode:"numeric",prefix:"$",autoComplete:"off",placeholder:"0.00",value:l.value,onChange:l.onChange})})}),e.jsx(g,{label:"Cost price",invalid:!!r.costPerItem,errorMessage:(i=r.costPerItem)==null?void 0:i.message,children:e.jsx(x,{name:"costPerItem",control:n,render:({field:l})=>e.jsx(j,{type:"number",inputMode:"numeric",prefix:"$",autoComplete:"off",placeholder:"0.00",value:l.value,onChange:l.onChange})})})]}),e.jsx("div",{className:"md:flex gap-4"})]})},Z=n=>{const{imgList:r,onImageDelete:t}=n,[i,l]=p.useState({}),[o,s]=p.useState(!1),[a,m]=p.useState(!1),d=u=>{l(u),s(!0)},h=()=>{s(!1),setTimeout(()=>{l({})},300)},C=u=>{l(u),m(!0)},b=()=>{l({}),m(!1)},S=()=>{t==null||t(i),m(!1)};return e.jsxs(e.Fragment,{children:[r.map(u=>e.jsxs("div",{className:"group relative rounded-xl border border-gray-200 dark:border-gray-600 p-2 flex",children:[e.jsx("img",{className:"rounded-lg max-h-[140px] mx-auto max-w-full dark:bg-transparent",src:u.img,alt:u.name}),e.jsxs("div",{className:"absolute inset-2 bg-[#000000ba] group-hover:flex hidden text-xl items-center justify-center",children:[e.jsx("span",{className:"text-gray-100 hover:text-gray-300 cursor-pointer p-1.5",onClick:()=>d(u),children:e.jsx(W,{})}),e.jsx("span",{className:"text-gray-100 hover:text-gray-300 cursor-pointer p-1.5",onClick:()=>C(u),children:e.jsx($,{})})]})]},u.id)),e.jsxs(H,{isOpen:o,onClose:h,onRequestClose:h,children:[e.jsx("h5",{className:"mb-4",children:i.name}),e.jsx("img",{className:"w-full",src:i.img,alt:i.name})]}),e.jsx(q,{isOpen:a,type:"danger",title:"Remove image",onClose:b,onRequestClose:b,onCancel:b,onConfirm:S,children:e.jsx("p",{children:" Are you sure you want to remove this image? "})})]})},_=({control:n,errors:r})=>{var o;const t=s=>{let a=!0;const m=["image/jpeg","image/png"],d=5e5;if(s)for(const h of s)m.includes(h.type)||(a="Please upload a .jpeg or .png file!"),h.size>=d&&(a="Upload image cannot more then 500kb!");return a},i=(s,a=[],m)=>{let d="1-img-0";const h=m.length-1;if(a.length>0){const u=a[a.length-1].id.split("-"),k=parseInt(u[u.length-1])+1;u.pop(),d=[...u,k].join("-")}const C={id:d,name:m[h].name,img:URL.createObjectURL(m[h])},b=[...a,C];s(b)},l=(s,a=[],m)=>{let d=K(a);d=d.filter(h=>h.id!==m.id),s(d)};return e.jsxs(f,{children:[e.jsx("h4",{className:"mb-2",children:"Product Image"}),e.jsx("p",{children:"Choose a product photo or simply drag and drop up to 5 photos here."}),e.jsx("div",{className:"mt-4",children:e.jsx(g,{invalid:!!r.imgList,errorMessage:(o=r.imgList)==null?void 0:o.message,className:"mb-4",children:e.jsx(x,{name:"imgList",control:n,render:({field:s})=>e.jsx(e.Fragment,{children:s.value&&s.value.length?e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 xl:grid-cols-3 gap-2",children:[e.jsx(Z,{imgList:s.value,onImageDelete:a=>l(s.onChange,s.value,a)}),e.jsx(w,{draggable:!0,className:"min-h-fit",beforeUpload:t,showList:!1,onChange:a=>i(s.onChange,s.value,a),children:e.jsxs("div",{className:"max-w-full flex flex-col px-4 py-2 justify-center items-center min-h-[130px]",children:[e.jsx("div",{className:"text-[50px]",children:e.jsx(B,{})}),e.jsxs("p",{className:"text-center mt-1 text-xs",children:[e.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," ",""]}),e.jsx("span",{className:"text-primary",children:"Click to browse"})]})]})})]}):e.jsx(w,{draggable:!0,beforeUpload:t,showList:!1,onChange:a=>i(s.onChange,s.value,a),children:e.jsxs("div",{className:"max-w-full flex flex-col px-4 py-8 justify-center items-center",children:[e.jsx("div",{className:"text-[60px]",children:e.jsx(B,{})}),e.jsxs("p",{className:"flex flex-col items-center mt-2",children:[e.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," ",""]}),e.jsx("span",{className:"text-primary",children:"Click to browse"})]})]})})})})})}),e.jsx("p",{children:"Image formats: .jpg, .jpeg, .png, preferred size: 1:1, file size is restricted to a maximum of 500kb."})]})},M=[{label:"Bags",value:"bags"},{label:"Cloths",value:"cloths"},{label:"Devices",value:"devices"},{label:"Shoes",value:"shoes"},{label:"Watches",value:"watches"}],I=[{label:"Ravan",value:"bags"},{label:"Cloths",value:"cloths"},{label:"Devices",value:"devices"},{label:"Shoes",value:"shoes"},{label:"Watches",value:"watches"}],U=[{label:"trend",value:"trend"},{label:"unisex",value:"unisex"}],ee=({control:n,errors:r})=>{var t,i,l;return e.jsxs(f,{children:[e.jsx("h4",{className:"mb-6",children:"Brand"}),e.jsx(g,{label:"Category",invalid:!!r.category,errorMessage:(t=r.category)==null?void 0:t.message,children:e.jsx(x,{name:"category",control:n,render:({field:o})=>e.jsx(v,{options:M,value:M.filter(s=>s.value===o.value),onChange:s=>o.onChange(s==null?void 0:s.value)})})}),e.jsx(g,{label:"Sub Category",invalid:!!r.Subcategory,errorMessage:(i=r.Subcategory)==null?void 0:i.message,children:e.jsx(x,{name:"Subcategory",control:n,render:({field:o})=>e.jsx(v,{options:I,value:I.filter(s=>s.value===o.value),onChange:s=>o.onChange(s==null?void 0:s.value)})})}),e.jsx(g,{label:"Sub-sub Category",invalid:!!r.SubSubcategory,errorMessage:(l=r.SubSubcategory)==null?void 0:l.message,children:e.jsx(x,{name:"SubSubcategory",control:n,render:({field:o})=>e.jsx(v,{options:U,value:U.filter(s=>s.value===o.value),onChange:s=>o.onChange(s==null?void 0:s.value)})})})]})},V=[{label:"Small",value:"Small"},{label:"Meadium",value:"Meadium"},{label:"Large",value:"Large"}],D=[{label:"L",value:"L"},{label:"ML",value:"ML"},{label:"G",value:"G"},{label:"KG",value:"KG"}],O=[{label:"Bottle",value:"Bottle"},{label:"Box",value:"Box"},{label:"Carton",value:"Carton"},{label:"Each",value:"Each"},{label:"Pack",value:"Pack"}],se=({control:n,errors:r})=>{var t,i,l,o;return e.jsxs(f,{children:[e.jsx("h4",{className:"mb-6",children:" Unit of measurement "}),e.jsx(g,{label:"UOM",invalid:!!r.UOM,errorMessage:(t=r.UOM)==null?void 0:t.message,children:e.jsx(x,{name:"UOM",control:n,render:({field:s})=>e.jsx(v,{options:O,value:O.filter(a=>a.value===s.value),onChange:a=>s.onChange(a==null?void 0:a.value)})})}),e.jsx(g,{label:"Size",invalid:!!r.Size,errorMessage:(i=r.Size)==null?void 0:i.message,children:e.jsx(x,{name:"Size",control:n,render:({field:s})=>e.jsx(v,{options:V,value:V.filter(a=>a.value===s.value),onChange:a=>s.onChange(a==null?void 0:a.value)})})}),e.jsx(g,{label:"Volume",invalid:!!r.Volume,errorMessage:(l=r.Volume)==null?void 0:l.message,children:e.jsx(x,{name:"Volume",control:n,render:({field:s})=>e.jsx(v,{options:D,value:D.filter(a=>a.value===s.value),onChange:a=>s.onChange(a==null?void 0:a.value)})})}),e.jsx(g,{label:"UnitValue",invalid:!!r.UnitValue,errorMessage:(o=r.UnitValue)==null?void 0:o.message,children:e.jsx(x,{name:"UnitValue",control:n,render:({field:s})=>e.jsx(j,{type:"text",autoComplete:"off",placeholder:"Unit Value",value:s.value||"",onChange:s.onChange,onBlur:s.onBlur})})})]})},ae=c.object({name:c.string().min(1,{message:"Product name required!"}),productCode:c.string().min(1,{message:"Product code required!"}),SPAcode:c.string().min(1,{message:"SPA code required!"}),description:c.string().min(1,{message:"Product description required!"}),price:c.string().min(1,{message:"Price required!"}),costPerItem:c.string().min(1,{message:"Cost required!"}),imgList:c.array(c.object({id:c.string(),name:c.string(),img:c.string()})).min(1,{message:"At least 1 image required!"}),category:c.string().min(1,{message:"Product category required!"}),Subcategory:c.string().min(1,{message:"Subcategory required!"}),SubSubcategory:c.string().min(1,{message:"SubSubcategory required!"}),Size:c.string().min(1,{message:"Size required!"}),Volume:c.string().min(1,{message:"Volume required!"}),UnitValue:c.string().min(1,{message:"Unit value required!"}),UOM:c.string().min(1,{message:"UOM required!"})}),re=n=>{const{onFormSubmit:r,defaultValues:t={imgList:[]},children:i}=n,{handleSubmit:l,reset:o,formState:{errors:s},control:a}=F({defaultValues:{...t},resolver:J(ae)});p.useEffect(()=>{z(t)||o(t)},[JSON.stringify(t)]);const m=d=>{r==null||r(d)};return e.jsxs(R,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:l(m),children:[e.jsx(L,{children:e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsxs("div",{className:"gap-4 flex flex-col flex-auto",children:[e.jsx(X,{control:a,errors:s}),e.jsx(Y,{control:a,errors:s}),e.jsx(se,{control:a,errors:s})]}),e.jsxs("div",{className:"lg:min-w-[440px] 2xl:w-[500px] gap-4 flex flex-col",children:[e.jsx(_,{control:a,errors:s}),e.jsx(ee,{control:a,errors:s})]})]})}),e.jsx(E,{children:i})]})},Be=()=>{const n=A(),[r,t]=p.useState(!1),[i,l]=p.useState(!1),o=async d=>{console.log("Submitted values",d),l(!0),await G(800),l(!1),P.push(e.jsx(N,{type:"success",children:"Product created!"}),{placement:"top-center"}),n("/concepts/products/product-list")},s=()=>{t(!0),P.push(e.jsx(N,{type:"success",children:"Product discardd!"}),{placement:"top-center"}),n("/concepts/products/product-list")},a=()=>{t(!0)},m=()=>{t(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(re,{newProduct:!0,defaultValues:{name:"",description:"",productCode:"",SPAcode:"",price:"",costPerItem:"",imgList:[],category:"",tags:[],brand:"",Subcategory:"",SubSubcategory:"",Size:"",Volume:"",UnitValue:"",UOM:""},onFormSubmit:o,children:e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx(Q,{}),onClick:a,children:"Discard"}),e.jsx(y,{variant:"solid",type:"submit",loading:i,children:"Create"})]})]})})}),e.jsx(q,{isOpen:r,type:"danger",title:"Discard changes",onClose:m,onRequestClose:m,onCancel:m,onConfirm:s,children:e.jsxs("p",{children:["Are you sure you want discard this? This action can't be undo."," "]})})]})};export{Be as default};
