import{r as u,j as e,Q as v,R as F}from"./index-B5IrYwSf.js";import{u as S,A as y}from"./useTimeOutMessage-CEvSZJX8.js";import{u as N,F as w,a as C,C as k,I as P,B as x}from"./index.esm-CCO8k5GL.js";import{A as B}from"./ActionLink-XY9C4Tf0.js";import{t as A,z as h}from"./index-CzVxQRl_.js";import"./CloseButton-Cfj2d_0a.js";import"./StatusIcon-BYLHsQ-F.js";const E=h.object({email:h.string().email().min(5)}),I=o=>{var d;const[s,a]=u.useState(!1),{className:i,setMessage:t,setEmailSent:r,emailSent:n,children:g}=o,{handleSubmit:j,formState:{errors:c},control:p}=N({resolver:A(E)}),f=async l=>{const{email:b}=l;try{await v({email:b})&&(a(!1),r==null||r(!0))}catch(m){t==null||t(typeof m=="string"?m:"Some error occured!"),a(!1)}a(!1)};return e.jsx("div",{className:i,children:n?e.jsx(e.Fragment,{children:g}):e.jsxs(w,{onSubmit:j(f),children:[e.jsx(C,{label:"Email",invalid:!!c.email,errorMessage:(d=c.email)==null?void 0:d.message,children:e.jsx(k,{name:"email",control:p,render:({field:l})=>e.jsx(P,{type:"email",placeholder:"Email",autoComplete:"off",...l})})}),e.jsx(x,{block:!0,loading:s,variant:"solid",type:"submit",children:s?"Submiting...":"Submit"})]})})},M=({signInUrl:o="/sign-in"})=>{const[s,a]=u.useState(!1),[i,t]=S(),r=F(),n=()=>{r(o)};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:s?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2",children:"Check your email"}),e.jsx("p",{className:"font-semibold heading-text",children:"We have sent a password recovery to your email"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2",children:"Forgot Password"}),e.jsx("p",{className:"font-semibold heading-text",children:"Please enter your email to receive a verification code"})]})}),i&&e.jsx(y,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:i})}),e.jsx(I,{emailSent:s,setMessage:t,setEmailSent:a,children:e.jsx(x,{block:!0,variant:"solid",type:"button",onClick:n,children:"Continue"})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Back to "}),e.jsx(B,{to:o,className:"heading-text font-bold",themeColor:!1,children:"Sign in"})]})]})},q=()=>e.jsx(M,{});export{M as ForgotPasswordBase,q as default};
