import{r as k,i as f,j as t,b as g,H as K,e as T,S as D,f as R,h as E,k as M,u as v,l as H,m as w,n as L,o as V,p as O}from"./index-B5IrYwSf.js";import{L as U}from"./Logo-BCwB-jeM.js";import{M as N}from"./index-DTOdxSzl.js";import{S as C}from"./ScrollBar-BqmuVa0d.js";import{a as $,N as F,A as P,n as A,b as Y,u as I,c as B,H as G,U as W,M as q}from"./UserProfileDropdown-BV9z7ZJa.js";import{V as z}from"./VerticalMenuContent-DRL7NKmK.js";import{H as J,a as Q}from"./CloseButton-Cfj2d_0a.js";import{L as X}from"./LayoutBase-CuAA2d7n.js";import"./index-R_st83Tk.js";import"./index-DzIjJXQ9.js";import"./useMergeRef-CbC_Qfe6.js";import"./floating-ui.dom-4meoaf82.js";import"./useUniqueId-B4COUAd7.js";import"./uniqueId-CiKHi5Kj.js";import"./toString-DGAcNTrc.js";import"./debounce-B0zjTqoc.js";import"./Drawer-cn7TLeWU.js";const Z=r=>{const{onChange:a,routeKey:s,activeKeys:l,onSetActiveKey:c,direction:d,navigationTree:i,userAuthority:o,mode:u,selectedMenu:m,t:y,...x}=r,{includedRouteTree:n}=$(i,s),p=({key:e,title:h,menu:_,translateKey:b})=>{a({title:h,menu:_,translateKey:b}),c([e])},S=({key:e})=>{a({}),c([e])};k.useEffect(()=>{n.type!==F&&!f(n)&&a({key:n.key,title:n.title,menu:n.subMenu,translateKey:n.translateKey})},[n.key]);const j=l&&l.length>0?l:f(m)?[]:[n.key];return t.jsxs("div",{...x,children:[t.jsx(g,{to:T.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:K},children:t.jsx(U,{imgClass:"max-h-10",mode:u,type:"streamline",className:D})}),t.jsx(C,{autoHide:!0,direction:d,children:t.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:j,children:i.map(e=>t.jsx(P,{authority:e.authority,userAuthority:o,children:t.jsx("div",{title:y(e.translateKey,e.title),children:e.subMenu&&e.subMenu.length>0?t.jsx(N.MenuItem,{eventKey:e.key,className:"mb-2",onSelect:()=>p({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey}),children:t.jsx("div",{className:"text-2xl",children:A[e.icon]})}):t.jsx(g,{to:e.path,className:"flex items-center h-full w-full",onClick:()=>S({key:e.key}),children:t.jsx(N.MenuItem,{eventKey:e.key,className:"mb-2",children:t.jsx("div",{className:"text-2xl",children:A[e.icon]})})})})},e.key))})})]})},ee=r=>{const{className:a,title:s,menu:l,routeKey:c,onCollapse:d,direction:i,translationSetup:o,userAuthority:u,...m}=r,y=()=>{d()};return t.jsxs("div",{className:R("h-full",a),...m,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:K},children:[t.jsx("h5",{className:"font-bold",children:s}),t.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[i===E&&t.jsx(J,{}),i===M&&t.jsx(Q,{})]})]}),t.jsx(C,{autoHide:!0,direction:i,children:t.jsx(z,{routeKey:c,navigationTree:l,translationSetup:o,userAuthority:u})})]})},te={width:L},se=({translationSetup:r=T.activeNavTranslation})=>{const{t:a}=Y(!r),[s,l]=k.useState({}),[c,d]=k.useState([]),i=v(e=>e.mode),o=v(e=>e.direction),u=H(e=>e.currentRouteKey),m=w(e=>e.user.authority),{larger:y}=I(),x=(e,h)=>`${e}-${h}`,n=e=>{l(e)},p=()=>{l({}),d([])},S=e=>{d(e)},j=()=>{let e={};const h="-270px";return o===E&&(e={marginLeft:h}),o===M&&(e={marginRight:h}),e};return t.jsx(t.Fragment,{children:y.md&&t.jsxs("div",{className:"stacked-side-nav",children:[t.jsx(Z,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",i)}`,style:te,routeKey:u,activeKeys:c,mode:i,direction:o,navigationTree:B,userAuthority:m||[],selectedMenu:s,t:a,onChange:n,onSetActiveKey:S}),t.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",i)}`,style:{width:V,...f(s)?j():{}},children:!f(s)&&t.jsx(ee,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:u,direction:o,translationSetup:r,userAuthority:m||[],onCollapse:p})})]})})},Ne=({children:r})=>{const{larger:a,smaller:s}=I();return t.jsx(X,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:t.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&t.jsx(se,{}),t.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[t.jsx(G,{className:"shadow-sm dark:shadow-2xl",headerStart:t.jsx(t.Fragment,{children:s.lg&&t.jsx(q,{})}),headerEnd:t.jsx(t.Fragment,{children:t.jsx(W,{hoverable:!1})})}),t.jsx("div",{className:"h-full flex flex-auto flex-col",children:r})]})]})})};export{Ne as default};
