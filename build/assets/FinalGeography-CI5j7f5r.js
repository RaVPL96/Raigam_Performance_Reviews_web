import{r as t,j as e}from"./index-B5IrYwSf.js";import{u as H,F as O,a as i,C as m,B as U,I as V}from"./index.esm-CCO8k5GL.js";import{S as h}from"./Select-BaPAiwbL.js";import{F as W,T as M}from"./useControllableState-DqCAkSU0.js";import{C as f}from"./Card-BwF7YU63.js";import{P as $}from"./Pagination-N3uZXzPk.js";import{M as J}from"./index-C4bv8pbo.js";import{T as L}from"./Tag-BgPA-gGY.js";import{u as Q,g as X,a as Y,b as Z,c as _,f as I}from"./index-DPUiuvHR.js";import{r as ee}from"./index-H0Krwn6i.js";import"./index-DzIjJXQ9.js";import"./Badge-DStSZEmW.js";import{C as ae}from"./index-CIt6kdqh.js";import"./index-BGBFoPiP.js";import"./Dialog-uXgwdOg_.js";import"./Drawer-cn7TLeWU.js";import"./index-R_st83Tk.js";import"./uniqueId-CiKHi5Kj.js";import"./index-DTOdxSzl.js";import"./Circle-BBway6_x.js";import"./index-s7E7QErQ.js";import"./toast-Bf3WYsML.js";import"./FileItem-CyU1Hyvm.js";import"./CloseButton-Cfj2d_0a.js";import"./floating-ui.dom-4meoaf82.js";import"./useMergeRef-CbC_Qfe6.js";import"./toString-DGAcNTrc.js";import"./useUniqueId-B4COUAd7.js";const{Tr:D,Th:re,Td:ne,THead:oe,TBody:te,Sorter:le}=M,F=[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:30,label:"30 / page"},{value:40,label:"40 / page"},{value:50,label:"50 / page"}];function ie({value:s,onChange:u,debounce:c=500,...g}){const[l,N]=t.useState(s);return t.useEffect(()=>{N(s)},[s]),t.useEffect(()=>{const o=setTimeout(()=>{u(l)},c);return()=>clearTimeout(o)},[l,u,c]),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"mr-2",children:"Search:"}),e.jsx(V,{size:"sm",...g,value:l,onChange:o=>N(o.target.value)})]})})}const z=(s,u,c,g)=>{const l=ee(s.getValue(u),c);return g({itemRank:l}),l.passed},Be=()=>{var x,v,T,R,S,j;const[s,u]=t.useState([]),[c,g]=t.useState(""),[l,N]=t.useState(10),[o,A]=t.useState(null),w=t.useMemo(()=>[{header:"Channel Code",accessorKey:"channelCode"},{header:"Channel Name",accessorKey:"channelName"},{header:"Sub-channel Code",accessorKey:"subChannelCode"},{header:"Sub-channel Name",accessorKey:"subChannelName"},{header:"Region Code",accessorKey:"regionCode"},{header:"Region Name",accessorKey:"regionName"},{header:"Area Code",accessorKey:"areaCode"},{header:"Area Name",accessorKey:"areaName"},{header:"Territory ID",accessorKey:"territoryId"},{header:"Territory Name",accessorKey:"territoryName"},{header:"Agency Name",accessorKey:"agencyName"},{header:"Is Active",accessorKey:"isActive",cell:({row:a})=>e.jsx("div",{className:"mr-2 rtl:ml-2",children:e.jsx(L,{className:a.original.isActive?"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100 border-0 rounded":"text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20 border-0",children:a.original.isActive?"Active":"Inactive"})})},{header:"Action",accessorKey:"action",cell:({row:a})=>e.jsxs("div",{className:"flex ",children:[e.jsx(W,{onClick:()=>E(a.original),className:"cursor-pointer mr-4 text-primary-deep text-lg"}),e.jsx(J,{onClick:()=>q(a.original),className:"cursor-pointer text-red-600 text-xl"})]})},{header:"Updated Date & Time",accessorKey:"updatedDateTime"}],[]),[C,b]=t.useState([{channelCode:"1",channelName:"Channel 1",subChannelCode:"R1A",subChannelName:"Sub-channel 1",regionCode:"R1A",regionName:"Region 1",areaCode:"A1",areaName:"Area 1",territoryId:"T1",territoryName:"Territory 1",agencyName:"Agency 1",isActive:!0,updatedDateTime:"2025-03-17 10:00:00"},{channelCode:"2",channelName:"Channel 1",subChannelCode:"R1A",subChannelName:"Sub-channel 1",regionCode:"R1A",regionName:"Region 1",areaCode:"A1",areaName:"Area 1",territoryId:"T2",territoryName:"Territory 2",agencyName:"Agency 2",isActive:!1,updatedDateTime:"2025-03-17 10:00:00"},{channelCode:"3",channelName:"Channel 2",subChannelCode:"R2B",subChannelName:"Sub-channel 2",regionCode:"R2B",regionName:"Region 2",areaCode:"A2",areaName:"Area 2",territoryId:"T3",territoryName:"Territory 3",agencyName:"Agency 3",isActive:!0,updatedDateTime:"2025-03-18 11:00:00"},{channelCode:"4",channelName:"Channel 2",subChannelCode:"R2B",subChannelName:"Sub-channel 2",regionCode:"R2B",regionName:"Region 2",areaCode:"A2",areaName:"Area 2",territoryId:"T4",territoryName:"Territory 4",agencyName:"Agency 4",isActive:!1,updatedDateTime:"2025-03-18 11:00:00"},{channelCode:"5",channelName:"Channel 3",subChannelCode:"R3C",subChannelName:"Sub-channel 3",regionCode:"R3C",regionName:"Region 3",areaCode:"A3",areaName:"Area 3",territoryId:"T5",territoryName:"Territory 5",agencyName:"Agency 5",isActive:!0,updatedDateTime:"2025-03-19 12:00:00"},{channelCode:"6",channelName:"Channel 3",subChannelCode:"R3C",subChannelName:"Sub-channel 3",regionCode:"R3C",regionName:"Region 3",areaCode:"A3",areaName:"Area 3",territoryId:"T6",territoryName:"Territory 6",agencyName:"Agency 6",isActive:!1,updatedDateTime:"2025-03-19 12:00:00"},{channelCode:"7",channelName:"Channel 4",subChannelCode:"R4D",subChannelName:"Sub-channel 4",regionCode:"R4D",regionName:"Region 4",areaCode:"A4",areaName:"Area 4",territoryId:"T7",territoryName:"Territory 7",agencyName:"Agency 7",isActive:!0,updatedDateTime:"2025-03-20 13:00:00"},{channelCode:"8",channelName:"Channel 4",subChannelCode:"R4D",subChannelName:"Sub-channel 4",regionCode:"R4D",regionName:"Region 4",areaCode:"A4",areaName:"Area 4",territoryId:"T8",territoryName:"Territory 8",agencyName:"Agency 8",isActive:!1,updatedDateTime:"2025-03-20 13:00:00"},{channelCode:"9",channelName:"Channel 5",subChannelCode:"R5E",subChannelName:"Sub-channel 5",regionCode:"R5E",regionName:"Region 5",areaCode:"A5",areaName:"Area 5",territoryId:"T9",territoryName:"Territory 9",agencyName:"Agency 9",isActive:!0,updatedDateTime:"2025-03-21 14:00:00"},{channelCode:"10",channelName:"Channel 5",subChannelCode:"R5E",subChannelName:"Sub-channel 5",regionCode:"R5E",regionName:"Region 5",areaCode:"A5",areaName:"Area 5",territoryId:"T10",territoryName:"Territory 10",agencyName:"Agency 10",isActive:!1,updatedDateTime:"2025-03-21 14:00:00"},{channelCode:"11",channelName:"Channel 6",subChannelCode:"R6F",subChannelName:"Sub-channel 6",regionCode:"R6F",regionName:"Region 6",areaCode:"A6",areaName:"Area 6",territoryId:"T11",territoryName:"Territory 11",agencyName:"Agency 11",isActive:!0,updatedDateTime:"2025-03-22 15:00:00"},{channelCode:"12",channelName:"Channel 6",subChannelCode:"R6F",subChannelName:"Sub-channel 6",regionCode:"R6F",regionName:"Region 6",areaCode:"A6",areaName:"Area 6",territoryId:"T12",territoryName:"Territory 12",agencyName:"Agency 12",isActive:!1,updatedDateTime:"2025-03-22 15:00:00"},{channelCode:"13",channelName:"Channel 7",subChannelCode:"R7G",subChannelName:"Sub-channel 7",regionCode:"R7G",regionName:"Region 7",areaCode:"A7",areaName:"Area 7",territoryId:"T13",territoryName:"Territory 13",agencyName:"Agency 13",isActive:!0,updatedDateTime:"2025-03-23 16:00:00"},{channelCode:"14",channelName:"Channel 7",subChannelCode:"R7G",subChannelName:"Sub-channel 7",regionCode:"R7G",regionName:"Region 7",areaCode:"A7",areaName:"Area 7",territoryId:"T14",territoryName:"Territory 14",agencyName:"Agency 14",isActive:!1,updatedDateTime:"2025-03-23 16:00:00"},{channelCode:"15",channelName:"Channel 8",subChannelCode:"R8H",subChannelName:"Sub-channel 8",regionCode:"R8H",regionName:"Region 8",areaCode:"A8",areaName:"Area 8",territoryId:"T15",territoryName:"Territory 15",agencyName:"Agency 15",isActive:!0,updatedDateTime:"2025-03-24 17:00:00"}]),K=C.length,y=Q({data:C,columns:w,filterFns:{fuzzy:z},state:{columnFilters:s,globalFilter:c},onColumnFiltersChange:u,onGlobalFilterChange:g,globalFilterFn:z,getCoreRowModel:_(),getFilteredRowModel:Z(),getSortedRowModel:Y(),getPaginationRowModel:X(),initialState:{pagination:{pageSize:l}}}),k=a=>{y.setPageIndex(a-1)},B=(a=0)=>{const r=Number(a);N(r),y.setPageSize(r)},E=a=>{A(a)},q=a=>{b(C.filter(r=>r.territoryId!==a.territoryId))},{handleSubmit:P,formState:{errors:n},control:d,reset:p}=H({defaultValues:{channel:"",subChannel:"",region:"",area:"",territory:"",agencyName:"",isActive:!0}}),G=async a=>{if(o)b(C.map(r=>r.territoryId===o.territoryId?{...r,...a}:r));else{const r={...a,territoryId:`T${C.length+1}`,updatedDateTime:new Date().toISOString()};b([...C,r])}p(),A(null)};return t.useEffect(()=>{o&&p(o)},[o,p]),e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-col lg:flex-row xl:flex-row gap-4",children:e.jsxs(f,{bordered:!1,className:"w-full h-1/2 overflow-auto",children:[e.jsx("h5",{className:"mb-2",children:"Final Geography"}),e.jsxs("div",{children:[e.jsx(ie,{value:c??"",className:"font-xs shadow border border-block",placeholder:"Search all columns...",onChange:a=>g(String(a))}),e.jsxs(M,{children:[e.jsx(oe,{children:y.getHeaderGroups().map(a=>e.jsx(D,{children:a.headers.map(r=>e.jsx(re,{colSpan:r.colSpan,children:r.isPlaceholder?null:e.jsxs("div",{className:r.column.getCanSort()?"cursor-pointer select-none":"",onClick:r.column.getToggleSortingHandler(),children:[I(r.column.columnDef.header,r.getContext()),e.jsx(le,{sort:r.column.getIsSorted()})]})},r.id))},a.id))}),e.jsx(te,{children:y.getRowModel().rows.map(a=>e.jsx(D,{children:a.getVisibleCells().map(r=>e.jsx(ne,{className:"py-1 text-xs",children:I(r.column.columnDef.cell,r.getContext())},r.id))},a.id))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx($,{pageSize:y.getState().pagination.pageSize,currentPage:y.getState().pagination.pageIndex+1,total:K,onChange:k}),e.jsx("div",{style:{minWidth:130},children:e.jsx(h,{size:"sm",isSearchable:!1,value:F.find(a=>a.value===l),options:F,onChange:a=>B(a==null?void 0:a.value)})})]})]})]})}),o&&e.jsxs(f,{bordered:!1,className:"w-full mt-4",children:[e.jsx("h5",{className:"mb-2",children:"Update Final Geography"}),e.jsxs(O,{size:"sm",onSubmit:P(G),children:[e.jsx(i,{invalid:!!n.channel,errorMessage:(x=n.channel)==null?void 0:x.message,children:e.jsx(m,{name:"channel",control:d,render:({field:a})=>e.jsx(h,{size:"sm",placeholder:"Select Channel",options:[{label:"Channel 1",value:"Channel 1"},{label:"Channel 2",value:"Channel 2"}],value:a.value,onChange:r=>a.onChange(r)}),rules:{required:"Channel is required"}})}),e.jsx(i,{invalid:!!n.subChannel,errorMessage:(v=n.subChannel)==null?void 0:v.message,children:e.jsx(m,{name:"subChannel",control:d,render:({field:a})=>e.jsx(h,{size:"sm",placeholder:"Select Sub-channel",options:[{label:"Sub-channel 1",value:"Sub-channel 1"},{label:"Sub-channel 2",value:"Sub-channel 2"}],value:a.value,onChange:r=>a.onChange(r)}),rules:{required:"Sub-channel is required"}})}),e.jsx(i,{invalid:!!n.region,errorMessage:(T=n.region)==null?void 0:T.message,children:e.jsx(m,{name:"region",control:d,render:({field:a})=>e.jsx(h,{size:"sm",placeholder:"Select Region",options:[{label:"Region 1",value:"Region 1"},{label:"Region 2",value:"Region 2"}],value:a.value,onChange:r=>a.onChange(r)}),rules:{required:"Region is required"}})}),e.jsx(i,{invalid:!!n.area,errorMessage:(R=n.area)==null?void 0:R.message,children:e.jsx(m,{name:"area",control:d,render:({field:a})=>e.jsx(h,{size:"sm",placeholder:"Select Area",options:[{label:"Area 1",value:"Area 1"},{label:"Area 2",value:"Area 2"}],value:a.value,onChange:r=>a.onChange(r)}),rules:{required:"Area is required"}})}),e.jsx(i,{invalid:!!n.territory,errorMessage:(S=n.territory)==null?void 0:S.message,children:e.jsx(m,{name:"territory",control:d,render:({field:a})=>e.jsx(h,{size:"sm",placeholder:"Select Territory",options:[{label:"Territory 1",value:"Territory 1"},{label:"Territory 2",value:"Territory 2"}],value:a.value,onChange:r=>a.onChange(r)}),rules:{required:"Territory is required"}})}),e.jsx(i,{invalid:!!n.agencyName,errorMessage:(j=n.agencyName)==null?void 0:j.message,children:e.jsx(m,{name:"agencyName",control:d,render:({field:a})=>e.jsx(h,{size:"sm",placeholder:"Select Agency",options:[{label:"Agency 1",value:"Agency 1"},{label:"Agency 2",value:"Agency 2"}],value:a.value,onChange:r=>a.onChange(r)}),rules:{required:"Agency is required"}})}),e.jsx(i,{children:e.jsx(m,{name:"isActive",control:d,render:({field:a})=>e.jsx(ae,{...a,checked:a.value,children:"Is Active"})})}),e.jsx(i,{children:e.jsx(U,{variant:"solid",block:!0,type:"submit",children:o?"Update":"Create"})})]})]})]})};export{Be as default};
